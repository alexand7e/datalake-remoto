# ğŸï¸ Projeto DataLake Local com Trino, Hive, MinIO e Superset

Este projeto fornece uma infraestrutura local para **anÃ¡lise de dados moderna**, baseada em arquitetura de DataLake, usando componentes como Trino, Hive, MinIO e Superset. Ele permite simular um ambiente de produÃ§Ã£o completo para ingestÃ£o, consulta distribuÃ­da, metastore e visualizaÃ§Ã£o de dados.

---

## ğŸ“¦ Funcionalidades Principais

- âœ… DataLake local com suporte a Bronze, Silver e Gold zones
- âœ… Armazenamento S3 compatÃ­vel com MinIO
- âœ… CatÃ¡logo de metadados com Hive Metastore + PostgreSQL
- âœ… Engine distribuÃ­da de consultas com Trino
- âœ… VisualizaÃ§Ã£o e dashboards com Apache Superset
- âœ… ConfiguraÃ§Ã£o modular com `docker-compose` por serviÃ§o

---

## ğŸ§± Arquitetura do Projeto

```

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Superset  â”‚â—„â”€â”€â”€â”€â”€â”€â–ºâ”‚    Trino     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     Hive        â”‚
â”‚   Metastore     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     PostgreSQL   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚
â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
â”‚   MinIO S3  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

````

---

## ğŸš€ Como Utilizar

### 1. PrÃ©-requisitos

- Docker
- Docker Compose
- DomÃ­nio pÃºblico (caso opte por usar Traefik)
- `.env` configurado corretamente (veja o `.env.example`)

### 2. Configurar VariÃ¡veis de Ambiente

Copie o arquivo de exemplo:

```bash
cp .env.example .env
````

Edite com suas credenciais, domÃ­nios e senhas desejadas.

---

## ğŸ§° Primeira ExecuÃ§Ã£o

Execute o script de setup inicial:

```bash
chmod +x setup.sh
./setup.sh
```

Esse script prepara diretÃ³rios, valida variÃ¡veis e configura permissÃµes.

---

## ğŸ—ï¸ Subindo os ServiÃ§os

VocÃª pode iniciar os serviÃ§os em blocos separados ou todos de uma vez:

### ğŸ”¹ Iniciar por blocos

```bash
docker compose -f docker/compose.storage.yml up -d         # MinIO
docker compose -f docker/compose.metastore.yml up -d       # PostgreSQL + Hive
docker compose -f docker/compose.compute.yml up -d         # Trino
docker compose -f docker/compose.superset.yml up -d        # Superset
```

### ğŸ”¹ Iniciar tudo

```bash
./restart_dlake.sh
```

---

## ğŸŒ Acesso com ou sem Proxy Reverso

### ğŸ” OpÃ§Ã£o 1: Com Traefik + rede `traefik-net` (recomendado)

Configure o proxy reverso para usar domÃ­nios como:

* `https://minio.seudominio.com.br`
* `https://bi.seudominio.com.br`
* `https://trino.seudominio.com.br`

#### Criar rede externa Traefik:

```bash
docker network create traefik-net
```

Os `docker-compose` jÃ¡ estÃ£o preparados com labels e uso de `${DOMAIN_BASE}` para domÃ­nios pÃºblicos. Certifique-se de configurar corretamente no seu `.env`.

### ğŸ–¥ï¸ OpÃ§Ã£o 2: Acesso local via `localhost`

Se nÃ£o quiser usar proxy reverso, os serviÃ§os funcionam localmente:

| ServiÃ§o  | URL                                            |
| -------- | ---------------------------------------------- |
| MinIO    | [http://localhost:9001](http://localhost:9001) |
| Superset | [http://localhost:8088](http://localhost:8088) |
| Trino UI | [http://localhost:8080](http://localhost:8080) |

Basta remover ou ignorar as labels `traefik.*` dos `docker-compose` e expor as portas diretamente.

---

## ğŸ“ Estrutura do Projeto

```
.
â”œâ”€â”€ .env.example                 # Modelo de variÃ¡veis
â”œâ”€â”€ config_propriedades.sh      # Script auxiliar (opcional)
â”œâ”€â”€ setup.sh                    # Prepara pastas e permissÃµes
â”œâ”€â”€ restart_dlake.sh            # Sobe todos os serviÃ§os
â”œâ”€â”€ docker/
â”‚   â”œâ”€â”€ compose.compute.yml     # Trino
â”‚   â”œâ”€â”€ compose.metastore.yml   # Postgres + Hive
â”‚   â”œâ”€â”€ compose.storage.yml     # MinIO
â”‚   â”œâ”€â”€ compose.superset.yml    # Superset
â”‚   â”œâ”€â”€ init/                   # Scripts de inicializaÃ§Ã£o
â”‚   â””â”€â”€ logs/                   # Logs persistentes
â”œâ”€â”€ hive/conf/hive-site.xml     # Config do Hive
â”œâ”€â”€ trino/etc/                  # Config do Trino (catalogs, jvm, node)
â”œâ”€â”€ notebooks/                  # EspaÃ§o para anÃ¡lise exploratÃ³ria
```

---

## ğŸ§ª Testes e Consultas

* Crie tabelas Delta Lake via Trino ou Hive
* Use Superset para consultar os dados e montar dashboards
* Dados sÃ£o armazenados no MinIO (`s3://bronze/...`, etc.)

---

## ğŸ“Š Roadmap Futuro

* [ ] Suporte a upload direto de arquivos no Superset
* [ ] IntegraÃ§Ã£o com JupyterLab local
* [ ] Templates de notebooks de exploraÃ§Ã£o
* [ ] Pipeline de ingestÃ£o automÃ¡tica

---

## ğŸ¤ ContribuiÃ§Ã£o

ContribuiÃ§Ãµes sÃ£o bem-vindas! Sinta-se Ã  vontade para abrir uma issue ou enviar um pull request com melhorias.

---

## ğŸ“œ LicenÃ§a

Projeto livre para uso acadÃªmico e corporativo. Respeite as licenÃ§as das ferramentas integradas (Apache 2.0, MIT, etc.).

---

## ğŸ‘¨â€ğŸ’» Autor

**Alexandre Barros**
ğŸ“§ [alexand7e@gmail.com](mailto:alexand7e@gmail.com)
ğŸ”— [github.com/alexand7e](https://github.com/alexand7e)

